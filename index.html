<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock, Paper, Scissors!</title>
    </head>
    <body>

        <script>

        function getPlayerChoice() {
            let choice = prompt('Please enter your Rock/Paper/Scissors Choice: ');
            return choice
        }

        function getComputerChoice(){
            let randomSelection = ['Scissors', 'Rock', 'Paper'];
            let randomNumber = Math.floor(Math.random()*3)
            return randomSelection[randomNumber]
        }

        function checkPlayerChoice(choice) {
            let validChoices = ['Scissors', 'Rock', 'Paper']
            let lowercaseChoices = validChoices.map(x => x.toLowerCase())
            if (lowercaseChoices.includes(choice)) {
                return true
            } 
            return false
        }

        let playerWinCount = 0;
        let computerWinCount = 0;

        function playRound (playerSelection, computerSelection){
         
            if (playerSelection === 'rock' && computerSelection === 'paper'){
                computerWinCount +=1;
                return 'You Lose! Paper beats Rock'

            } else if (playerSelection === 'paper' && computerSelection === 'rock'){
                playerWinCount +=1;
                return 'You Win! Paper beats Rock'
                
            } else if (playerSelection === 'paper' && computerSelection === 'scissors'){
                computerWinCount +=1;
                return 'You Lose! Scissors beats Paper'
                
            } else if (playerSelection === 'scissors' && computerSelection === 'paper'){
                playerWinCount +=1;
                return 'You Win! Scissors beats Paper'
                
            } else if (playerSelection === 'rock' && computerSelection === 'scissors'){
                playerWinCount +=1;
                return 'You Win! Rock beats Scissors'
               
            } else if(playerSelection === 'scissors' && computerSelection === 'rock'){
                computerWinCount +=1;
                return 'You Lose! Rock beats Scissors'
                
            } else (playerSelection === computerSelection);
                return 'You Draw!'
        }

        function startGame() {
            for (let i =0; i < 4; i++){
            let validPlayerChoice = false
            let playerSelection = getPlayerChoice().toLowerCase();
            validPlayerChoice = checkPlayerChoice(playerSelection)

            while (validPlayerChoice == false) {
                console.log('That was an invalid choice, please pick again!')
                playerSelection = getPlayerChoice().toLowerCase();
                validPlayerChoice = checkPlayerChoice(playerSelection)
            }
            
            let computerSelection = getComputerChoice().toLowerCase();
            const playRoundResult = playRound(playerSelection, computerSelection);
            console.log(playRoundResult);
            console.log('You\'ve scored: '+playerWinCount +'\n' + 'The Computer has scored: '+ computerWinCount)
         }
        }

        startGame()

        </script>

    </body>
</html>